{% import "components/form/fields_macros.html.twig" as fields %}

{# TODO check allow_email params #}
{# TODO filter user/group (is_request/is_assign) #}


{% set requester_field %}
   {% include "components/itilobject/actor_field.html.twig" with {
      'item':        item,
      'type':        constant('CommonITILActor::REQUESTER'),
      'actortype':   'requester',
      'entities_id': params['entities_id'],
   } only %}
{% endset %}
{{ fields.field(
   'requester',
   requester_field,
   __("Requester"),
   field_options|merge({is_horizontal: false})
) }}

{% set observer_field %}
   {% include "components/itilobject/actor_field.html.twig" with {
      'item':        item,
      'type':        constant('CommonITILActor::OBSERVER'),
      'actortype':   'observer',
      'entities_id': params['entities_id']
   } only %}
{% endset %}
{{ fields.field(
   'observer',
   observer_field,
   __("Observer"),
   field_options|merge({is_horizontal: false})
) }}

{% set assign_field %}
   {% include "components/itilobject/actor_field.html.twig" with {
      'item':        item,
      'type':        constant('CommonITILActor::ASSIGN'),
      'actortype':   'assign',
      'entities_id': params['entities_id']
   } only %}
{% endset %}
{{ fields.field(
   'assign',
   assign_field,
   __("Assigned to"),
   field_options|merge({is_horizontal: false})
) }}
